import styles from './Pagination.module.css'

function Pagination({ currentPage=1, totalPages=5, onPageChange }) {
  // Generar un array de pÃ¡ginas a mostrar
  const pages = Array.from({ length: totalPages }, (_, i) => i + 1)
  const isFirstPage = currentPage === 1
  const isLastPage = currentPage === totalPages

  const stylePrevButton = isFirstPage ? { pointerEvents: 'none', opacity: 0.5 } : {}
  const styleNextButton = isLastPage ? { PointerEvents: 'none', opacity: 0.5 } : {}

  const handlePrevClick = (e) => {
    e.preventDefault()
    if (!isFirstPage && onPageChange) {
      onPageChange(currentPage - 1)
    }
  }

  const handleNextClick = (e) => {
    e.preventDefault()
    if (!isLastPage && onPageChange) {
      onPageChange(currentPage + 1)
    }
  }

  const handlePageClick = (e, page) => {
    e.preventDefault()
    if (page !== currentPage && onPageChange) {
      onPageChange(page)
    }
  }

  const buildPageURL = (page) => {
    const url = new URL(window.location)
    url.searchParams.set('page', page)
    return `${url.pathname}?${url.searchParams.toString()}`
  }

  return (
    <nav className={styles.pagination}>
        <a href={buildPageURL(currentPage - 1)} style={stylePrevButton} onClick={handlePrevClick}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M15 6l-6 6l6 6" />
          </svg>
        </a>
        {pages.map((page) => (
          <a
            key={page}
            data-page={page}
            href={buildPageURL(page)}
            className={currentPage === page ? styles.isActive : ""}
            onClick={(e) => handlePageClick(e, page)}
          >
            {page}
          </a>
        ))}
        <a href={buildPageURL(currentPage + 1)} style={styleNextButton} onClick={handleNextClick}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className="icon icon-tabler icons-tabler-outline icon-tabler-chevron-right">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M9 6l6 6l-6 6" />
          </svg>
        </a>
      </nav>
  )
}

export default Pagination